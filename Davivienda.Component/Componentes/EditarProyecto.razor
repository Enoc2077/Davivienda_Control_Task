@namespace Davivienda.Component.Componentes
@using Davivienda.Models.Modelos

<div class="modal-overlay-gold">
    <div class="modal-container-gold">
        <div class="modal-header-gold">
            <h2><i class="fas fa-edit"></i> Editar Proyecto: @Proyecto.PRO_NOM</h2>
            <button class="close-btn-gold" @onclick="CerrarModal">✕</button>
        </div>

        <div class="modal-body-gold">
            <div class="form-grid-gold">
                @* SECCIÓN 1: IDENTIDAD *@
                <div class="form-group-gold full-width">
                    <label class="label-gold">Nombre del Proyecto</label>
                    <input type="text" @bind="Proyecto.PRO_NOM" class="form-input-gold" placeholder="Ej. Migración de Core" />
                </div>

                <div class="form-group-gold full-width">
                    <label class="label-gold">Descripción Detallada</label>
                    <textarea @bind="Proyecto.PRO_DES" rows="2" class="form-input-gold" placeholder="Describa el alcance..."></textarea>
                </div>

                @* SECCIÓN 2: TIEMPOS *@
                <div class="form-group-gold">
                    <label class="label-gold">Fecha de Inicio</label>
                    <input type="date" @bind-value="Proyecto.PRO_FEC_INI" @bind-value:format="yyyy-MM-dd" class="form-input-gold" />
                </div>

                <div class="form-group-gold">
                    <label class="label-gold">Fecha de Finalización</label>
                    <input type="date" @bind-value="Proyecto.PRO_FEC_FIN" @bind-value:format="yyyy-MM-dd" class="form-input-gold" />
                </div>

                @* SECCIÓN 3: CLASIFICACIÓN Y ÁREA *@
                <div class="form-group-gold">
                    <label class="label-gold">Estado Actual</label>
                    <select @bind="Proyecto.PRO_EST" class="form-input-gold">
                        <option value="NUEVO">NUEVO</option>
                        <option value="INICIADO">INICIADO</option>
                        <option value="EN PROCESO">EN PROCESO</option>
                        <option value="FINALIZADO">FINALIZADO</option>
                    </select>
                </div>

                <div class="form-group-gold">
                    <label class="label-gold">Área Responsable</label>
                    @* Se vincula directamente al ARE_ID del modelo *@
                    <select @bind="Proyecto.ARE_ID" class="form-input-gold">
                        <option value="">-- Seleccione el Área --</option>
                        @foreach (var area in ListaAreas)
                        {
                            @* El valor debe ser el Guid del área para no romper la FK *@
                            <option value="@area.ARE_ID">@area.ARE_NOM</option>
                        }
                    </select>
                </div>
            </div>
        </div>

        <div class="modal-footer-gold">
            <button class="btn-gold-secondary" @onclick="CerrarModal">Cancelar</button>
            <button class="btn-gold-primary" @onclick="ActualizarProyecto">
                <i class="fas fa-save"></i> Guardar Cambios
            </button>
        </div>
    </div>
</div>