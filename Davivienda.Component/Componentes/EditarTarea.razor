@namespace Davivienda.Component.Componentes
@using Davivienda.Models.Modelos

<div class="modal-overlay">
    <div class="modal-card-premium animate-pop">
        @* Línea superior decorativa Davivienda (Verde para Tareas) *@
        <div class="modal-top-accent-green"></div>

        <div class="modal-head">
            <h2 class="modal-title-main">
                <i class="fas fa-pencil-alt"></i> Editar Tarea
            </h2>
            <button class="close-x-dav" @onclick="CerrarModal">×</button>
        </div>

        <div class="modal-body">
            <p class="modal-subtitle">Modificando actividades de: <strong>@Tarea.TAR_NOM</strong></p>

            <div class="form-grid-dav">
                @* Nombre de la Tarea *@
                <div class="input-container-dav full-width">
                    <label>NOMBRE DE LA TAREA</label>
                    <input type="text" @bind="Tarea.TAR_NOM" class="input-field-dav" />
                </div>

                @* Descripción *@
                <div class="input-container-dav full-width">
                    <label>DESCRIPCIÓN</label>
                    <textarea @bind="Tarea.TAR_DES" rows="3" class="input-field-dav"></textarea>
                </div>

                @* Campo Fecha Inicio: Carga el valor desde el modelo *@
                <div class="input-container-dav">
                    <label>FECHA INICIO</label>
                    <input type="date"
                           @bind-value="Tarea.TAR_FEC_INI"
                           @bind-value:format="yyyy-MM-dd"
                           class="input-field-dav" />
                </div>

                @* Campo Fecha Fin *@
                <div class="input-container-dav">
                    <label>FECHA FINALIZACIÓN</label>
                    <input type="date"
                           @bind-value="Tarea.TAR_FEC_FIN"
                           @bind-value:format="yyyy-MM-dd"
                           class="input-field-dav" />
                </div>

                @* Estado y Responsable *@
                <div class="input-container-dav">
                    <label>ESTADO ACTUAL</label>
                    <select @bind="Tarea.TAR_EST" class="input-field-dav select-dav visual-fix">
                        <option value="Pendiente">Pendiente</option>
                        <option value="En Progreso">En Progreso</option>
                        <option value="Completado">Completado</option>
                        <option value="Bloqueado">Bloqueado</option>
                    </select>
                </div>

                <div class="input-container-dav">
                    <label>USUARIO RESPONSABLE</label>
                    <select @bind="Tarea.USU_ID" class="input-field-dav select-dav visual-fix">
                        <option value="@Guid.Empty">-- Seleccione Usuario --</option>
                        @foreach (var usu in ListaUsuarios)
                        {
                            <option value="@usu.USU_ID">@usu.USU_NOM</option>
                        }
                    </select>
                </div>
            </div>
        </div>

        <div class="modal-foot-dav">
            <button class="btn-secondary-dav" @onclick="CerrarModal">Cancelar</button>
            <button class="btn-save-main-dav-green" @onclick="ActualizarTarea">
                <i class="fas fa-save"></i> Guardar Cambios
            </button>
        </div>
    </div>
</div>